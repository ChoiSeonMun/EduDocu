<!---
ebook:
  title: Chapter 3
  author: ChoiSeonMun

  pdf:
    paper-size: letter
    default-font-size: 12
    footer-template: "<span> Written by ChoiSeonMun _PAGENUM_ </span>"
--->

### 3. 변수와 상수
#### - 학습 목표
> **1.** 캐스팅을 이해한다.
> **2.** 변수와 상수를 입출력할 수 있다.
---
#### - 캐스팅(casting)

지난 시간, 우리는 변수와 상수가 무엇인지, 어떻게 선언하는지 알아보았다. 또한, 타입이 얼마나 중요한 것인지도 배웠다. 원래는 다른 타입 간 연산이 불가능하게 되어있으나, C++에서는(그리고 대부분의 다른 언어에서도) 유연성있게 간접적으로 연산할 수 있는 기능을 지원한다. 이것이 바로 캐스팅, 우리말로 하면 \`형 변환\`이다. 형 변환은 안전한 변환과 안전하지 않은 변환이 있다. 한번 자세히 알아보자.

- 안전한 변환

일단 기본적으로 같은 분류 안에서는 작은 크기의 타입에서 큰 크기로 타입으로 변환되는 것은 안전하다. 이유는 직관적으로 알 수 있을 것이다.

> - 정수형에서 정수형으로(승격promotion)
부호가 같을 때, `char`->`int`일 때는, 맨 끝 1바이트만 해당 값으로 채워지고 나머지는 0으로 채워진다. `bool`->`int`일 때는, `true`일시 `1`이, `false`일시 `0`이 채워진다.
> - 정수형에서 실수형으로
`char`, `int`에서 `double`형으로 변환될 때는, 지수가 해당 값으로 대입되고, 가수 부분은 0으로 대입된다. `bool`형에서 `double`형이 될 때는 `true`일시 `1`, `false`일시 `0`으로 대입된다.

- 안전하지 않은 변환(축소 변환)

보통 크기가 큰 타입에서 작은 타입으로 변환될 때 일어난다. 안전하지 않다고 한 것은 데이터가 손실되기 때문이다.

> - 정수형에서 정수형으로
`int`->`char`로 변환될 때는 앞의 3바이트는 짤리고 뒤의 1바이트만 대입된다. `int`->`bool`일 때는 `0`일 땐 `false`, 이외의 값이면 `true`로 변환된다. `char`->`bool`일때도 마찬가지다.
또한, 부호가 다를 때에는 부호 있는 값에서 없는 값으로 변환된다.
> - 실수형에서 정수형으로
`double`에서 `int`나 `char`로 변환될 때는 가수 부분은 모두 잘린채로 지수 부분만 대입된다. `bool`형으로 변환될 때는 `0`일 땐, `false`, 이외의 값이면 `true`로 변환된다.

형 변환을 하는 방법은 다음과 같다.

> <center> (타입)변수명 </center>
> <center> 타입(변수명) </center>

변수명엔 값이 들어갈 수 있다.

특별한 일을 제외하곤 캐스팅은 웬만하면 쓰지 않는 것이 좋다. 특히 축소 변환시 데이터가 손실되어 오류가 나기 쉽기 때문이다. 캐스팅을 쓸 때, 정말 필요한지, 다른 방법은 없는지 고민해보고 사용하자.

#### - 입출력

오랜만에 프로그래밍으로 돌아왔다. 이제 변수와 상수, 타입과 형 변환도 알았으니 입력과 출력을 사용할 수 있게 되었다. 오늘은 `<stdio.h>`에 들어있는 `scanf()`, `printf()`이다. 이 두 함수는 서식에 맞추어 입력 및 출력을 한다. 다음 예제를 보자.

```c++
#include <stdio.h>

int main()
{
  printf("%s\n", "숫자를 입력하세요.");
  int num;
  scanf("%d", &num);
  printf("입력한 숫자는 %d입니다.\n", num);

  return 0;
}
```
<center> <img src="http://i.imgur.com/d1mdUEd.png">
<b>실행 화면</b> </center>

다음 함수들의 구성이 어떻게 되어 있는지 감이 올 것이다.
> <center> int printf("형식 문자열", 변수) </center>
> <center> int scanf("형식 문자열", &변수) </center>

난데 없이 `&`연산자는 무엇일까? 좌변값(lvalue)에 `&`이 붙이면 해당 객체의 주소값을 참조한다는 의미이다. `scanf()`는 해당 객체의 주소값이 필요하기 때문이다.

`printf()`의 형식 문자열엔 표준출력에 출력될 문자열이 들어가며, 다음과 같은 형식 태그가 있을 수 있다. 형식 태그와 인자의 수는 같거나 많아야 한다.
> <center> %[플래그][너비][.소수점][길이]형식자 </center>
하나씩 살펴보자.

- 형식자
> `d, i` : 부호 있는 정수
> `u` : 부호 없는 정수
> `o` : 부호 있는 8진수
> `x, X` : 부호 있는 16진수
> `f` : 실수
> `e, E` : 과학적 지수표기법
> `g, G` : `f`와 `e, E`중 짧은 것을 표기
> `c` : 문자
> `s` : 문자열
> `p` : 주소값
> `%` : `%` 자체를 출력

- 플래그
> `-` : 왼쪽 정렬한다. 기본적으로는 오른쪽 정렬이다.
> `+` : 부호 있는 값에 `+`나 `-` 기호를 붙이도록 강제한다. 기본적으로는 음수에만 붙는다.
> `#` : 형식자 `o`, `x`, `X`와 함께 쓰이면 접두어를 붙인다. 형식자 `a`, `A`, `e`, `E`, `f`, `F`, `g`, `G`와 함께 쓰이면 소수점이 없어도 출력하도록 강제한다.
> `0` : 패딩(padding)을 0으로 채운다.

- 너비
> `숫자` : 최소 `숫자`만큼 문자가 출력되도록 강제한다. 만약 출력하고자 하는 문자 수가 `숫자`보다 작다면 부족한 부분은 공백으로 채운다. `숫자`보다 크다고 해서 문자가 잘리거나 하진 않는다.
> `*` : 매개변수 리스트에서 숫자를 받아 너비로 사용한다.

- 소수점
> `.숫자` : 정수 형식자에 대해서는 최소한 출력되야하는 숫자를 강제한다. 값이 `숫자`보다 작다면 0으로 패딩한다. `숫자`가 `0`이면 값이 0일시 출력하지 않는다.
> `.*` : 매개변수 리스트에서 숫자를 받아 소수점으로 사용한다.

길이는 설명하지 않는다.

`scanf()`의 형식 문자열은 이렇다.
> <center> <b>공백 문자</b>(whitespace character) : 공백 문자가 아닌 것들 이전에 나오는 모든 공백 문자를 무시 한다. </center>
> <center> <b>비 공백 문자</b> : 표준 입력에서 비 공백 문자와 비교하여 같다면 무시하고, 형식 문자열의 다음 문자들을 처리한다. 다르다면, 종료한다. 이 때, 버퍼는 비워지지 않는다.</center>
> <center> <b>형식 태그</b> : %[*][너비][길이]형식자 </center>
`printf()`와 다른 점만 설명한다.

- 형식자
> `i` : 10진수, 8진수, 16진수와 무관하게 모든 정수를 입력받는다.
> `X, E, G` : 사용하지 않는다. `x, e, g`가 대신 입력 받는다.

- \*
> 해당 형식자로 받아들인 데이터를 읽지만, 무시한다.

- 너비
> 읽어올 최대 문자 수를 지정한다.

- 길이
> `l` : `double`형 값을 읽어올 때에는 이 문자를 붙여야 한다.

꼼꼼한 사람이라면 반환형이 있다는 것을 봤을 것이다. 그럼 대체 무얼 반환하는 것일까? `printf()`는 성공시 출력된 문자수를 반환한다. 오류가 발생할 시 음수를 반환하게 된다. `scanf()`는 성공시 성공적으로 입력 받은 수를 반환한다. 오류가 발생할 시 `EOF`를 반환한다.


----
## 과제

**1.** 형 변환이란 무엇인가?
**2.** `double`에서 `int`로 변환 시 어떤 일이 일어나는가?
**3.** 사용자로부터 `0`과 `0x`를, 밑수를 나타내는 접두사로 이용해서 8진수나 10진수, 16진수 정수를 여러 번 입력하라는 프롬프트를 출력하는 프로그램을 작성하자. 그리고 입력된 수를 적절히 해석해 10진수로 변환하고, 변환한 값을 다음과 같이 적당히 열 맞춰 출력하자.
![2](http://i.imgur.com/wrfBSmS.png)
**4.** 다음을 입력 받아보자.
`12, c, 0.54, 0.36e-3`

----
